{
    "products": [
        {
            "name" : "DA-teste",
            "label": "VPC com VSI e Flow Logs",
            "version": "1.0.0",
            "product-kind": "solution",
            "tags": ["Virtual Private Cloud", "Virtual Server Instance", "VPC", "VSI", "Flow Logs"],
            "keywords": ["vpc", "vsi", "flow-logs", "virtual-private-cloud", "virtual-server-instance"],
            "short-description": "Provisiona uma VPC com uma única VSI em uma subnet especificada.",
            "long-description": "Este módulo Terraform provisiona uma VPC com subnet especificada e address prefix especificado, cria uma instância de Flow Logs e o conecta à VPC para coleta de logs. Instancia uma VSI dentro da VPC criada com uma VNI dentro da subnet criada, utilizando a chave ssh especificada, esta tendo sido criada neste módulo ou não.",
            "provider-name": "IBM",
            "features" : [ {
                "description": "Provisiona uma VPC com uma VSI, tendo Flow Logs para coleta dos logs.\n",
                "title": "Provisionamento de VPC com VSI e Flow Logs"
                }
            ],
            "flavors": [ {
                "label": "Standard",
                "name": "standard",
                "description": "Provisiona uma VPC com uma VSI, tendo Flow Logs para coleta dos logs.",
                "configuration" : [
                    {
                        "key": "region",
                        "type": "string",
                        "default_value" : "br-sao",
                        "description": "A região onde as instâncias serão provisionadas",
                        "required": true,
                        "options": [{
                            "displayname" : "br-sao",
                            "value" : "br-sao" 
                        }]
                    },
                    {
                        "key": "ibmcloud_api_key",
                        "type": "password",
                        "description": "A chave API para provisionamento da VPC e VSI",
                        "required": true
                    },
                    {
                        "key": "zone",
                        "type": "string",
                        "default_value" : "br-sao-1",
                        "description": "A região onde as subnets e address prefix serão provisionadas",
                        "required": true,
                        "options": [{
                            "displayname" : "br-sao-1",
                            "value" : "br-sao-1" 
                        }, 
                        {
                            "displayname" : "br-sao-2",
                            "value" : "br-sao-2" 
                        },
                        {
                            "displayname" : "br-sao-3",
                            "value" : "br-sao-3" 
                        }]
                    },
                    {
                        "key": "resource_group",
                        "type": "string",
                        "default_value" : "Default",
                        "description": "Resource Group onde as instâncias serão provisionadas",
                        "required": true,
                        "custom_config": {
                            "type": "resource_group"
                        }
                    },
                    {
                        "key": "tags",
                        "type": "list(string)",
                        "description": "Tags aplicadas para todos os resources criados",
                        "required": false
                    },
                    {
                        "key": "cos_instance_name",
                        "type": "string",
                        "description": "Nome da instância do Cloud Object Storage a ser criado para o Flow Logs",
                        "required": true
                    },
                    {
                        "key": "cos_bucket_name",
                        "type": "string",
                        "description": "Nome do bucket do Cloud Object Storage a ser criado para o Flow Logs",
                        "required": true
                    },
                    {
                        "key": "vpc_name",
                        "type": "string",
                        "description": "Nome da VPC",
                        "required": true
                    },
                    {
                        "key": "address_prefixes",
                        "type": "array",
                        "default_value" : [{
                            "name" : "address-1",
                            "ip_range" : "10.250.0.0/18",
                            "location" : "br-sao-1"
                        }],
                        "description": "O valor do address prefix da VPC. Deve ter um CIDR maior que o da subnet",
                        "required": true,
                        "multiline" : true
                    },
                    {
                        "key": "subnet-value",
                        "type": "array",
                        "default_value" : [{
                            "name" : "address-1",
                            "ip_range" : "10.250.0.0/18",
                            "location" : "br-sao-1"
                        }],
                        "description": "O valor da subnet da VPC.",
                        "required": true,
                        "multiline" : true
                    },
                    {
                        "key": "flow_logs_name",
                        "type": "string",
                        "description": "Nome do Flow Logs",
                        "required": true
                    },
                    {
                        "key": "flow_logs_active",
                        "type": "boolean",
                        "description": "Se Flow Logs estará ativo após sua criação",
                        "required": true,
                        "options": [
                            {
                            "displayname": "true",
                            "value": "true"
                            },
                            {
                            "displayname": "false",
                            "value": "false"
                            }]
                    },
                    {
                        "key": "create_policy",
                        "type": "boolean",
                        "description": "Se irá criar a policy que permite que o Flow Logs se comunique com o bucket. Caso essa policy já exista, o valor deve ser obrigatoriamente false.",
                        "default_value" : "false",
                        "required": true,
                        "options": [
                            {
                            "displayname": "true",
                            "value": "true"
                            },
                            {
                            "displayname": "false",
                            "value": "false"
                            }]
                    },
                    {
                        "key": "ssh_keys",
                        "type": "object",
                        "description": "Chave SSH usada para provisionar a VSI.",
                        "required": true,
                        "multiline" : true
                    },
                    {
                        "key": "create_ssh_key",
                        "type": "boolean",
                        "description": "Se irá criar uma chave ssh com a chave pública fornecida",
                        "required": true,
                        "options": [
                            {
                            "displayname": "true",
                            "value": "true"
                            },
                            {
                            "displayname": "false",
                            "value": "false"
                            }]
                    },
                    {
                        "key": "vni_name",
                        "type": "string",
                        "description": "Nome da Virtual Network Interface",
                        "required": true
                    },
                    {
                        "key": "vsi_name",
                        "type": "string",
                        "description": "Nome da VSI",
                        "required": true,
                        "default_value": "bx2-2x8"
                    },
                    {
                        "key": "vsi_image_name",
                        "type": "string",
                        "description": "Nome da imagem para ser utilizada na VSI",
                        "required": true,
                        "default_value": "ibm-centos-stream-10-amd64-4"
                    }
                ]
            } ]
        }
    ]
}